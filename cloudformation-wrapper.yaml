AWSTemplateFormatVersion: 2010-09-09

Parameters:

  LogLevel:
    Description: Application logging level
    Type: String
    Default: INFO
    AllowedValues:
    - CRITICAL
    - ERROR
    - WARNING
    - INFO
    - DEBUG

  ElasticSearchCidrIp:
    Type: String

  Maturity:
    Description: Value for MATURITY tag to be applied to all taggable resources
    Type: String
    Default: DEV
    AllowedValues:
    - DEV
    - TEST
    - PROD

Outputs:

  KibanaUrl:
    Value: !GetAtt MainStack.Outputs.KibanaUrl

Resources:

  MainStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      Tags:
      - Key: MATURITY
        Value: !Ref Maturity
      - Key: APPLICATION
        Value: GRFN-LOGGING
      Parameters:
        Name: !Ref AWS::StackName
        LogLevel: !Ref LogLevel
        ElasticSearchCidrIp: !Ref ElasticSearchCidrIp
      TemplateURL: cloudformation-main.yaml
